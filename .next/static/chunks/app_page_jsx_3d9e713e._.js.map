{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/brycethomas/Documents/zonix/app/page.jsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef } from \"react\";\nimport mapboxgl from \"mapbox-gl\";\nimport MapboxGeocoder from \"@mapbox/mapbox-gl-geocoder\";\nimport \"mapbox-gl/dist/mapbox-gl.css\";\nimport \"@mapbox/mapbox-gl-geocoder/dist/mapbox-gl-geocoder.css\";\n\nmapboxgl.accessToken = process.env.NEXT_PUBLIC_MAPBOX_ACCESS_TOKEN;\n\nexport default function MapPage() {\n  const mapContainer = useRef(null);\n  const map = useRef(null);\n\n  const defaultCenter = [-111.94, 33.4255]; // Tempe\n  const defaultZoom = 12;\n\n  useEffect(() => {\n    if (!mapboxgl.accessToken) {\n      console.error(\"Mapbox token missing\");\n      return;\n    }\n    if (map.current) return;\n\n    map.current = new mapboxgl.Map({\n      container: mapContainer.current,\n      style: \"mapbox://styles/mapbox/streets-v12\",\n      center: defaultCenter,\n      zoom: defaultZoom,\n      minZoom: 5,\n      maxZoom: 20,\n    });\n\n    map.current.on(\"load\", async () => {\n      // Controls\n      map.current.addControl(new mapboxgl.NavigationControl(), \"top-right\");\n\n      const geocoder = new MapboxGeocoder({\n        accessToken: mapboxgl.accessToken,\n        mapboxgl,\n        marker: false,\n      });\n      map.current.addControl(geocoder, \"top-left\");\n\n      // Style toggle buttons\n      const styleToggle = document.createElement(\"div\");\n      styleToggle.className = \"mapboxgl-ctrl mapboxgl-ctrl-group\";\n      styleToggle.style.display = \"flex\";\n      styleToggle.style.flexDirection = \"row\";\n      styleToggle.style.gap = \"5px\";\n      styleToggle.style.margin = \"10px\";\n\n      const styles = [\n        { label: \"Streets\", uri: \"mapbox://styles/mapbox/streets-v12\" },\n        { label: \"Dark\", uri: \"mapbox://styles/mapbox/dark-v11\" },\n        { label: \"Satellite\", uri: \"mapbox://styles/mapbox/satellite-streets-v12\" },\n        { label: \"Reset View\", uri: \"\" },\n      ];\n\n      styles.forEach((s) => {\n        const btn = document.createElement(\"button\");\n        btn.textContent = s.label;\n        btn.onclick = () => {\n          if (s.uri) {\n            map.current.setStyle(s.uri);\n          } else {\n            map.current.flyTo({ center: defaultCenter, zoom: defaultZoom });\n          }\n        };\n        styleToggle.appendChild(btn);\n      });\n\n      map.current.addControl(\n        {\n          onAdd: () => styleToggle,\n          onRemove: () => styleToggle.remove(),\n        },\n        \"bottom-right\"\n      );\n\n      // Load zoning overlay\n      try {\n        const res = await fetch(\"/data/tempe_zoning.geojson\");\n        if (!res.ok) throw new Error(\"Failed to load zoning GeoJSON\");\n        const zoningData = await res.json();\n\n        map.current.addSource(\"zoning\", {\n          type: \"geojson\",\n          data: zoningData,\n        });\n\n        map.current.addLayer({\n          id: \"zoning-fill\",\n          type: \"fill\",\n          source: \"zoning\",\n          paint: {\n            \"fill-color\": [\n              \"match\",\n              [\"get\", \"DISTRICT\"], // Adjust to match property name in file\n              \"R1\", \"#fbb03b\",\n              \"R2\", \"#223b53\",\n              \"C-2\", \"#e55e5e\",\n              \"#888888\"\n            ],\n            \"fill-opacity\": 0.4,\n          },\n        });\n\n        map.current.addLayer({\n          id: \"zoning-outline\",\n          type: \"line\",\n          source: \"zoning\",\n          paint: {\n            \"line-color\": \"#000000\",\n            \"line-width\": 1,\n          },\n        });\n\n        map.current.on(\"click\", \"zoning-fill\", (e) => {\n          const props = e.features[0].properties;\n          new mapboxgl.Popup()\n            .setLngLat(e.lngLat)\n            .setHTML(`<strong>Zoning:</strong> ${props.ZoningCode || \"Unknown\"}`)\n            .addTo(map.current);\n        });\n\n        map.current.on(\"mouseenter\", \"zoning-fill\", () =>\n          (map.current.getCanvas().style.cursor = \"pointer\")\n        );\n        map.current.on(\"mouseleave\", \"zoning-fill\", () =>\n          (map.current.getCanvas().style.cursor = \"\")\n        );\n      } catch (err) {\n        console.error(err);\n      }\n    });\n  }, []);\n\n  return <div ref={mapContainer} style={{ height: \"100vh\", width: \"100vw\" }} />;\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}