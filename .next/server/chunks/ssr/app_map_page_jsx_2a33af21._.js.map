{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///Users/brycethomas/Documents/zonix/app/map/page.jsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef } from \"react\";\nimport mapboxgl from \"mapbox-gl\";\n\nmapboxgl.accessToken = process.env.NEXT_PUBLIC_MAPBOX_ACCESS_TOKEN;\n\nexport default function MapPage() {\n  const mapContainer = useRef(null);\n  const map = useRef(null);\n\n  useEffect(() => {\n    if (map.current) return; // initialize only once\n\n    map.current = new mapboxgl.Map({\n      container: mapContainer.current,\n      style: \"mapbox://styles/mapbox/light-v11\",\n      center: [-111.94, 33.4255], // Tempe center\n      zoom: 12,\n    });\n\n    map.current.on(\"load\", async () => {\n      // ---- 1. Load GeoJSON ----\n      const response = await fetch(\"/data/Tempe_Zoning.geojson\");\n      const geojson = await response.json();\n\n      // ---- 2. Add Source ----\n      map.current.addSource(\"tempe-zoning\", {\n        type: \"geojson\",\n        data: geojson,\n      });\n\n      // ---- 3. Extract Unique Zoning Codes ----\n      const zonings = [...new Set(geojson.features.map(f => f.properties.ZONING))];\n\n      // ---- 4. Generate HSL Colors ----\n      const colors = zonings.map((_, i) => `hsl(${(i * 360) / zonings.length}, 70%, 60%)`);\n\n      // ---- 5. Build Match Expression ----\n      const matchExpression = [\"match\", [\"get\", \"ZONING\"]];\n      zonings.forEach((z, i) => {\n        matchExpression.push(z, colors[i]);\n      });\n      matchExpression.push(\"#ccc\"); // fallback color\n\n      // ---- 6. Add Layer ----\n      map.current.addLayer({\n        id: \"tempe-zoning-fill\",\n        type: \"fill\",\n        source: \"tempe-zoning\",\n        paint: {\n          \"fill-color\": matchExpression,\n          \"fill-opacity\": 0.6,\n        },\n      });\n\n      // ---- 7. Add Popup ----\n      map.current.on(\"click\", \"tempe-zoning-fill\", (e) => {\n        const props = e.features[0].properties;\n        new mapboxgl.Popup()\n          .setLngLat(e.lngLat)\n          .setHTML(\n            `<strong>${props.ZONING}</strong><br>${props.DESCRIPTION || \"No description available\"}`\n          )\n          .addTo(map.current);\n      });\n\n      // ---- 8. Cursor on Hover ----\n      map.current.on(\"mouseenter\", \"tempe-zoning-fill\", () => {\n        map.current.getCanvas().style.cursor = \"pointer\";\n      });\n      map.current.on(\"mouseleave\", \"tempe-zoning-fill\", () => {\n        map.current.getCanvas().style.cursor = \"\";\n      });\n    });\n  }, []);\n\n  return (\n    <div\n      ref={mapContainer}\n      style={{\n        width: \"100vw\",\n        height: \"100vh\",\n        position: \"absolute\",\n        top: 0,\n        left: 0,\n      }}\n    />\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAKA,oJAAA,CAAA,UAAQ,CAAC,WAAW;AAEL,SAAS;IACtB,MAAM,eAAe,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAE;IAC5B,MAAM,MAAM,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAE;IAEnB,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,IAAI,OAAO,EAAE,QAAQ,uBAAuB;QAEhD,IAAI,OAAO,GAAG,IAAI,oJAAA,CAAA,UAAQ,CAAC,GAAG,CAAC;YAC7B,WAAW,aAAa,OAAO;YAC/B,OAAO;YACP,QAAQ;gBAAC,CAAC;gBAAQ;aAAQ;YAC1B,MAAM;QACR;QAEA,IAAI,OAAO,CAAC,EAAE,CAAC,QAAQ;YACrB,4BAA4B;YAC5B,MAAM,WAAW,MAAM,MAAM;YAC7B,MAAM,UAAU,MAAM,SAAS,IAAI;YAEnC,0BAA0B;YAC1B,IAAI,OAAO,CAAC,SAAS,CAAC,gBAAgB;gBACpC,MAAM;gBACN,MAAM;YACR;YAEA,2CAA2C;YAC3C,MAAM,UAAU;mBAAI,IAAI,IAAI,QAAQ,QAAQ,CAAC,GAAG,CAAC,CAAA,IAAK,EAAE,UAAU,CAAC,MAAM;aAAG;YAE5E,mCAAmC;YACnC,MAAM,SAAS,QAAQ,GAAG,CAAC,CAAC,GAAG,IAAM,CAAC,IAAI,EAAE,AAAC,IAAI,MAAO,QAAQ,MAAM,CAAC,WAAW,CAAC;YAEnF,sCAAsC;YACtC,MAAM,kBAAkB;gBAAC;gBAAS;oBAAC;oBAAO;iBAAS;aAAC;YACpD,QAAQ,OAAO,CAAC,CAAC,GAAG;gBAClB,gBAAgB,IAAI,CAAC,GAAG,MAAM,CAAC,EAAE;YACnC;YACA,gBAAgB,IAAI,CAAC,SAAS,iBAAiB;YAE/C,yBAAyB;YACzB,IAAI,OAAO,CAAC,QAAQ,CAAC;gBACnB,IAAI;gBACJ,MAAM;gBACN,QAAQ;gBACR,OAAO;oBACL,cAAc;oBACd,gBAAgB;gBAClB;YACF;YAEA,yBAAyB;YACzB,IAAI,OAAO,CAAC,EAAE,CAAC,SAAS,qBAAqB,CAAC;gBAC5C,MAAM,QAAQ,EAAE,QAAQ,CAAC,EAAE,CAAC,UAAU;gBACtC,IAAI,oJAAA,CAAA,UAAQ,CAAC,KAAK,GACf,SAAS,CAAC,EAAE,MAAM,EAClB,OAAO,CACN,CAAC,QAAQ,EAAE,MAAM,MAAM,CAAC,aAAa,EAAE,MAAM,WAAW,IAAI,4BAA4B,EAEzF,KAAK,CAAC,IAAI,OAAO;YACtB;YAEA,+BAA+B;YAC/B,IAAI,OAAO,CAAC,EAAE,CAAC,cAAc,qBAAqB;gBAChD,IAAI,OAAO,CAAC,SAAS,GAAG,KAAK,CAAC,MAAM,GAAG;YACzC;YACA,IAAI,OAAO,CAAC,EAAE,CAAC,cAAc,qBAAqB;gBAChD,IAAI,OAAO,CAAC,SAAS,GAAG,KAAK,CAAC,MAAM,GAAG;YACzC;QACF;IACF,GAAG,EAAE;IAEL,qBACE,8OAAC;QACC,KAAK;QACL,OAAO;YACL,OAAO;YACP,QAAQ;YACR,UAAU;YACV,KAAK;YACL,MAAM;QACR;;;;;;AAGN","debugId":null}}]
}