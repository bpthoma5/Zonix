{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 141, "column": 0}, "map": {"version":3,"sources":["file:///Users/brycethomas/Documents/zonix/app/page.jsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef } from \"react\";\nimport mapboxgl from \"mapbox-gl\";\nimport MapboxGeocoder from \"@mapbox/mapbox-gl-geocoder\";\nimport \"mapbox-gl/dist/mapbox-gl.css\";\nimport \"@mapbox/mapbox-gl-geocoder/dist/mapbox-gl-geocoder.css\";\n\nmapboxgl.accessToken = process.env.NEXT_PUBLIC_MAPBOX_ACCESS_TOKEN;\n\nexport default function MapPage() {\n  const mapContainer = useRef(null);\n  const map = useRef(null);\n\n  const defaultCenter = [-111.94, 33.4255]; // Tempe\n  const defaultZoom = 12;\n\n  useEffect(() => {\n    if (!mapboxgl.accessToken) {\n      console.error(\"Mapbox token missing\");\n      return;\n    }\n    if (map.current) return;\n\n    map.current = new mapboxgl.Map({\n      container: mapContainer.current,\n      style: \"mapbox://styles/mapbox/streets-v12\",\n      center: defaultCenter,\n      zoom: defaultZoom,\n      minZoom: 5,\n      maxZoom: 20,\n    });\n\n    map.current.on(\"load\", async () => {\n      // Controls\n      map.current.addControl(new mapboxgl.NavigationControl(), \"top-right\");\n\n      const geocoder = new MapboxGeocoder({\n        accessToken: mapboxgl.accessToken,\n        mapboxgl,\n        marker: false,\n      });\n      map.current.addControl(geocoder, \"top-left\");\n\n      // Style toggle buttons\n      const styleToggle = document.createElement(\"div\");\n      styleToggle.className = \"mapboxgl-ctrl mapboxgl-ctrl-group\";\n      styleToggle.style.display = \"flex\";\n      styleToggle.style.flexDirection = \"row\";\n      styleToggle.style.gap = \"5px\";\n      styleToggle.style.margin = \"10px\";\n\n      const styles = [\n        { label: \"Streets\", uri: \"mapbox://styles/mapbox/streets-v12\" },\n        { label: \"Dark\", uri: \"mapbox://styles/mapbox/dark-v11\" },\n        { label: \"Satellite\", uri: \"mapbox://styles/mapbox/satellite-streets-v12\" },\n        { label: \"Reset View\", uri: \"\" },\n      ];\n\n      styles.forEach((s) => {\n        const btn = document.createElement(\"button\");\n        btn.textContent = s.label;\n        btn.onclick = () => {\n          if (s.uri) {\n            map.current.setStyle(s.uri);\n          } else {\n            map.current.flyTo({ center: defaultCenter, zoom: defaultZoom });\n          }\n        };\n        styleToggle.appendChild(btn);\n      });\n\n      map.current.addControl(\n        {\n          onAdd: () => styleToggle,\n          onRemove: () => styleToggle.remove(),\n        },\n        \"bottom-right\"\n      );\n\n      // Load zoning overlay\n      try {\n        const res = await fetch(\"/data/tempe_zoning.geojson\");\n        if (!res.ok) throw new Error(\"Failed to load zoning GeoJSON\");\n        const zoningData = await res.json();\n\n        map.current.addSource(\"zoning\", {\n          type: \"geojson\",\n          data: zoningData,\n        });\n\n        map.current.addLayer({\n          id: \"zoning-fill\",\n          type: \"fill\",\n          source: \"zoning\",\n          paint: {\n            \"fill-color\": [\n              \"match\",\n              [\"get\", \"DISTRICT\"], // Adjust to match property name in file\n              \"R1\", \"#fbb03b\",\n              \"R2\", \"#223b53\",\n              \"C-2\", \"#e55e5e\",\n              \"#888888\"\n            ],\n            \"fill-opacity\": 0.4,\n          },\n        });\n\n        map.current.addLayer({\n          id: \"zoning-outline\",\n          type: \"line\",\n          source: \"zoning\",\n          paint: {\n            \"line-color\": \"#000000\",\n            \"line-width\": 1,\n          },\n        });\n\n        map.current.on(\"click\", \"zoning-fill\", (e) => {\n          const props = e.features[0].properties;\n          new mapboxgl.Popup()\n            .setLngLat(e.lngLat)\n            .setHTML(`<strong>Zoning:</strong> ${props.ZoningCode || \"Unknown\"}`)\n            .addTo(map.current);\n        });\n\n        map.current.on(\"mouseenter\", \"zoning-fill\", () =>\n          (map.current.getCanvas().style.cursor = \"pointer\")\n        );\n        map.current.on(\"mouseleave\", \"zoning-fill\", () =>\n          (map.current.getCanvas().style.cursor = \"\")\n        );\n      } catch (err) {\n        console.error(err);\n      }\n    });\n  }, []);\n\n  return <div ref={mapContainer} style={{ height: \"100vh\", width: \"100vw\" }} />;\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}